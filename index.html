<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Helper</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f4f4f9; }
    #quiz, #result { margin-top: 20px; }
    .question { margin-bottom: 15px; padding: 10px; background: #fff; border-radius: 10px; }
    button { padding: 10px 20px; margin-top: 10px; border: none; background: #4CAF50; color: white; border-radius: 8px; }
    button:hover { background: #45a049; }
  </style>
</head>
<body>
  <h1>ðŸ“š Study Helper</h1>
  <p>Upload your reviewer (TXT only for now):</p>
  <input type="file" id="fileInput" accept=".txt">
  <div id="quiz"></div>
  <div id="result"></div>

  <script>
    const fileInput = document.getElementById('fileInput');
    const quizDiv = document.getElementById('quiz');
    const resultDiv = document.getElementById('result');

    let questions = [];
    let score = 0;

    fileInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = (event) => {
        const text = event.target.result;
        generateQuestions(text);
        showQuiz();
      };
      reader.readAsText(file);
    });

    function generateQuestions(text) {
      const lines = text.split('\n').filter(line => line.trim() !== '');
      questions = lines.map((line, index) => {
        return {
          question: `What did you study about line ${index+1}?`,
          answer: line.trim()
        };
      });
    }

    function showQuiz() {
      quizDiv.innerHTML = '';
      resultDiv.innerHTML = '';
      score = 0;
      questions.forEach((q, i) => {
        const div = document.createElement('div');
        div.classList.add('question');
        div.innerHTML = `
          <p>${q.question}</p>
          <input type="text" id="ans-${i}" placeholder="Type your answer">
        `;
        quizDiv.appendChild(div);
      });
      const btn = document.createElement('button');
      btn.innerText = 'Submit Quiz';
      btn.onclick = checkAnswers;
      quizDiv.appendChild(btn);
    }

    function checkAnswers() {
      score = 0;
      questions.forEach((q, i) => {
        const ans = document.getElementById(`ans-${i}`).value.trim().toLowerCase();
        if (ans === q.answer.toLowerCase()) score++;
      });
      resultDiv.innerHTML = `<h2>You scored ${score} / ${questions.length}</h2>`;
    }
  </script>
</body>
</html>
